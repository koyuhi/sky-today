<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>{{ page.title }} - {{ site.title }}</title>

        <link rel="stylesheet" href="{{ '/assets/css/layout.css' | relative_url }}"
        />
        <!-- Splide CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.3/dist/css/splide.min.css">
    </head>

    <body id="body">
        <header>
            <h1>
                <a href="{{ site.baseurl }}/">{{ site.title }}</a>
            </h1>
        </header>
        <main>
            <div class="page-date">{{ page.date | date: "%Y年%-m月%-d日" }}</div>
            <div class="text">
            {{ page.text | newline_to_br }}
            </div>

            <div id="splide" class="splide">
                <div class="splide__track">
                    <ul class="splide__list">
                        {% assign default_bg = "#fcfcfc" %}
                        {% for img in page.images %}
                        <li class="splide__slide">
                            <div class="slide-wrapper" style="--bg: {{ img.bg | default: default_bg }}">ß
                                <img src="{{ site.baseurl }}{{ img.src }}" alt="{{ img.caption }}" loading="lazy" />
                                {% if img.caption %}
                                <div class="caption">{{ img.caption }}</div>
                                {% endif %}
                            </div>
                        </li>
                        {% endfor %}
                        <li class="splide__slide">
                            <div class="text">
                                <p>{{ text | newline_to_br }}</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div> <!-- #splide ここまで -->
        </main>
        <footer>
            <div class="center">
                <small>&copy; {{ site.title }} {{ site.time | date: '%Y' }}</small>
            </div>
        </footer>

        <!-- Splide JS -->
        <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.3/dist/js/splide.min.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                new Splide("#splide", {
                    type: "slide",
                    direction: "ttb", // ← 縦方向（top to bottom）
                    height: "100vh", // ← 高さを固定
                    width: "100%", // ← 幅は画面いっぱい
                    pagination: true,
                    arrows: false, // ← 縦だと矢印は邪魔なのでオフ推奨
                    wheel: true, // ← マウスホイール操作もOK
                    releaseWheel: true, // ← スクロールとの干渉防止
                }).mount();
            });
        </script>
    </body>
</html>
